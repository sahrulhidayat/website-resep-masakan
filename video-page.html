<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Resep Makanan</title>
    <link rel="stylesheet" href="fontawesome/css/all.min.css"> <!-- https://fontawesome.com/ -->
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro&display=swap" rel="stylesheet">
    <!-- https://fonts.google.com/ -->
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="css/templatemo-video-catalog.css">
</head>
<body>
	<div class="tm-page-wrap mx-auto">
		<div class="position-relative">
			<div class="potition-absolute tm-site-header">
				<div class="container-fluid position-relative">
					<div class="row">
						<div class="col-7 col-md-4">
                            <a href="index.html" class="text-center tm-logo-container">
                                <img src="img/logo.png" alt="Logo">
                            </a>
                        </div>						
                        <div class="col-5 col-md-8 ml-auto mr-0">
                            <div class="tm-site-nav">
                                <nav class="navbar navbar-expand-lg mr-0 ml-auto" id="tm-main-nav">
                                    <button class="navbar-toggler tm-bg-black py-2 px-3 mr-0 ml-auto collapsed" type="button"
                                        data-toggle="collapse" data-target="#navbar-nav" aria-controls="navbar-nav"
                                        aria-expanded="false" aria-label="Toggle navigation">
                                        <span>
                                            <i class="fas fa-bars tm-menu-closed-icon"></i>
                                            <i class="fas fa-times tm-menu-opened-icon"></i>
                                        </span>
                                    </button>
                                    <div class="collapse navbar-collapse tm-nav" id="navbar-nav">
                                        <ul class="navbar-nav text-uppercase">
                                            <li class="nav-item active">
                                                <a class="black-nav-link tm-black-nav-link" href="index.html">Resep <span class="sr-only">(current)</span></a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="black-nav-link tm-black-nav-link" href="about.html">Tentang</a>
                                            </li>
                                            <li class="nav-item">
                                                <a class="black-nav-link tm-black-nav-link" href="contact.html">Kontak</a>
                                            </li>
                                        </ul>
                                    </div>
                                </nav>
                            </div>
                        </div>
					</div>
				</div>
			</div>
		</div>

		<!-- Page content -->
		<div class="container-fluid">
			<div class="mx-auto tm-content-container">
				<main>
					<div class="row mb-5"></div>
					<div class="row mb-5 pb-4">
						<!-- Video player -->
						<div id="video-player" class="col-12"></div>
					</div>
					<div class="row mb-5 pb-5">
						<div class="col-xl-8 col-lg-7">
							<!-- Video description -->
							<div class="tm-video-description-box">
								<h2 id="video-title" class="mb-5 tm-video-title">Video Title</h2>
								<p id="video-description" class="mb-4">Video Description</p>
							</div>							
						</div>
						<div class="col-xl-4 col-lg-5">
							<!-- Share box -->
							<div class="tm-bg-gray tm-share-box">
								<h6 class="tm-share-box-title mb-4">Bagikan video</h6>
								<div class="mb-5 d-flex">
									<a href="" class="tm-bg-white tm-share-button"><i class="fab fa-facebook"></i></a>
									<a href="" class="tm-bg-white tm-share-button"><i class="fab fa-twitter"></i></a>
									<a href="" class="tm-bg-white tm-share-button"><i class="fab fa-pinterest"></i></a>
									<a href="" class="tm-bg-white tm-share-button"><i class="far fa-envelope"></i></a>
								</div>
								<p class="mb-4">Author: <a href="https://templatemo.com" class="tm-text-link">Admin</a></p>
								<a href="#" class="tm-bg-white px-5 mb-4 d-inline-block tm-text-primary tm-likes-box tm-liked">
									<i class="fas fa-heart mr-3 tm-liked-icon"></i>
									<i class="far fa-heart mr-3 tm-not-liked-icon"></i>
									<span id="tm-likes-count">486 likes</span>
								</a>
								<div>
									<button class="btn btn-primary p-0 tm-btn-animate tm-btn-download tm-icon-download"><span>Download Video</span></button>	
								</div>								
							</div>
						</div>
					</div>
					<div class="row pt-4 pb-5">
						<div class="col-12">
							<h2 class="mb-5 tm-text-primary">Video Terkait</h2>
							<!-- Video Terkait -->
							<div id="item-list" class="row tm-catalog-item-list"></div>
						</div>
					</div>
				</main>

				<!-- Subscribe form and footer links -->
                <div class="row mt-5 pt-3">
                    <div class="col-xl-6 col-lg-12 mb-4">
                        <div class="tm-bg-gray p-5 h-100">
                            <h3 class="tm-text-primary mb-3">Dapatkan informasi update dari website ini!</h3>
                            <p class="mb-5">Berlangganan agar mendapatkan informasi update konten website</p>
                            <form action="" method="GET" class="tm-subscribe-form">
                                <input type="text" name="email" placeholder="Masukkan Email..." required>
                                <button type="submit" class="btn rounded-0 btn-primary tm-btn-small">Berlangganan</button>
                            </form>
                        </div>
                    </div>
                    <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12 mb-4">
                        <div class="p-5 tm-bg-gray">
                            <h3 class="tm-text-primary mb-4">Link</h3>
                            <ul class="list-unstyled tm-footer-links">
                                <li><a href="#">Favorit</a></li>
                                <li><a href="#">Sumber</a></li>
                            </ul>    
                        </div>                        
                    </div>
                    <div class="col-xl-3 col-lg-6 col-md-6 col-sm-6 col-12 mb-4">
                        <div class="p-5 tm-bg-gray h-100">
                            <h3 class="tm-text-primary mb-4">Halaman</h3>
                            <ul class="list-unstyled tm-footer-links">
                                <li><a href="#">Video</a></li>
                                <li><a href="#">Pertanyaan</a></li>
                                <li><a href="#">Tentang</a></li>
                                <li><a href="#">Kontak</a></li>
                                <li><a href="#">Kebijakan Privasi</a></li>
                            </ul>
                        </div>                        
                    </div>
                </div> <!-- row -->
			</div> <!-- .tm-content-container -->
		</div>
	</div>

	<script src="js/jquery-3.4.1.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <script>
    	$(document).ready(function() {
    		$('.tm-likes-box').click(function(e) {
    			e.preventDefault();
    			$(this).toggleClass('tm-liked');

    			if($(this).hasClass('tm-liked')) {
    				$('#tm-likes-count').html('486 likes');
    			} else {
    				$('#tm-likes-count').html('485 likes');
    			}
    		});
    	});

		const urlParams = new URLSearchParams(window.location.search);
		const videoId = urlParams.get("id")

		fetch("res/res.json")
			.then((response) => response.json())
			.then((data) => {
				const videoData = data.find(item => item.id == videoId);

				const videoPlayer = document.getElementById("video-player")
				const title = document.getElementById("video-title")
				const description = document.getElementById("video-description")
				const itemList = document.getElementById("item-list");

				videoPlayer.innerHTML = `
				<iframe width="1422" height="800" src="https://www.youtube.com/embed/${videoData.id}" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope" allowfullscreen>							  
				</iframe>
				`;

				const iframe = document.querySelector('iframe');
				const main = document.querySelector('main');

				function resizeIframe() {
					const width = main.clientWidth;
					iframe.width = width;
					iframe.height = width * 0.5625;
				}
				window.addEventListener('resize', resizeIframe);
				resizeIframe(); 

				title.textContent = videoData.title;
				description.textContent = videoData.description;

				data.forEach((item) => {
					const listItem = document.createElement("div");
					const queryString = new URLSearchParams({ id: item.id }).toString();

					listItem.classList.add(
					"col-lg-4",
					"col-md-6",
					"col-sm-12",
					"tm-catalog-item"
					);
					listItem.innerHTML = `
						<div class="position-relative tm-thumbnail-container">
							<img src="https://img.youtube.com/vi/${item.id}/hqdefault.jpg" alt="Thumbnail Video" class="img-fluid tm-catalog-item-img">    
							<a href="video-page.html?${queryString}" class="position-absolute tm-img-overlay">
								<i class="fas fa-play tm-overlay-icon"></i>
							</a>
						</div>    
						<div class="p-4 tm-bg-gray tm-catalog-item-description">
							<h3 class="tm-text-primary mb-3 tm-catalog-item-title">${item.title}</h3>
							<p class="tm-catalog-item-text">${item.description}</p>
						</div>
					`;
					itemList.appendChild(listItem);
				});
			})
			.catch((error) => console.error("Error loading JSON:", error));
    </script>
</body>
</html>